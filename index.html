<!DOCTYPE html>
<!--Developed by Madindex / Copyright 2021-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'>
    <meta http-equiv="X-UA-Compatible" content= "ie=edge">
    <title>Madindex</title>
</head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>  
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js" integrity="sha512-8E3KZoPoZCD+1dgfqhPbejQBnQfBXe8FuwL4z/c8sTrgeDMFEnoyTlH3obB4/fV+6Sg0a0XF+L/6xS4Xx1fUEg==" crossorigin="anonymous"></script>
    
<script>
var imgs = [];
var imgUrls = ["instagram.png", "m_0.png", "m_00000.jpg"];
for (i=0;i<imgUrls.length;i++) {
    imgs.push(new Image());
    imgs[i].src = imgUrls[i]
}
</script> <!--preload images-->

<script>
$('body').append('<div id="loader"></div>');
$(window).on('load', function(){
  setTimeout(removeLoader, 3000);
});
function removeLoader(){
    $( "#loader" ).fadeOut(1500, function() {
      $('html, body').css({overflow: 'hidden'});
      $('html, body').css({overflow: 'visible'});
      $( "#loader" ).remove();
      document.getElementById("hero").style.animation = "slideup 1s ease";
      setTimeout(function() {
          document.getElementById("hero").style.animation = "float 25s linear infinite";
      },1000);
  });  
}
</script>

<style>
    @font-face {
        font-family: 'klik';
        src: url("klik.otf");
    }
    @font-face {
        font-family: 'espera';
        src: url("espera.ttf");
    }
    @font-face {
        font-family: 'rock';
        src: url("rockford.otf");
    }
    @font-face {
        font-family: 'newyork';
        src: url("NewYork.otf");
    }
    @font-face {
        font-family: 'code';
        src: url("code.ttf");
    }
    @font-face {
        font-family: 'pixel';
        src: url("PixelCards.ttf");
    }
    @font-face {
        font-family: '3d';
        src: url("3D.ttf");
    }
    @font-face {
        font-family: 'icons';
        src: url("icon.ttf");
    }
    @font-face {
        font-family: 'dico';
        src: url("dico.ttf");
    }
    body {
        background: #000;
        color: #fff;
        margin: 20px;
    }
    #loader {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background: #000;
        z-index: 20;
    }
    .menubuttons {
        position: absolute;
        width: 100%;
        left: 0;
        right: 0;
        height: 7em;
        display: block;
        background: transparent;
        opacity: 0%;
        border: none;
        outline: none;
        z-index: 2;
    }
    .menu {
        opacity: 0%;
        pointer-events: none;
        margin-top: 15%;
    }
    @keyframes menuin {
        0% {
            pointer-events: none;
            opacity: 0%;
            filter: blur(10px);
        }
        100% {
            pointer-events: all;
            opacity: 100%;
            filter: blur(0);
        }
    }
    @keyframes menuout {
        100% {
            pointer-events: none;
            opacity: 0%;
            filter: blur(10px);
        }
        0% {
            pointer-events: all;
            opacity: 100%;
            filter: blur(0);
        }
    }
    .menuon {
        width: 30%;
        height: 15%;
        border: none;
        background: red;
        opacity: 0%;
        margin-top: 500px;
        position: fixed;
        z-index: 90;
        top: -50%;
        left: 50%;
        transform: translate(-50%,-50%);
    }
    .menuoff {
        width: 30%;
        height: 15%;
        border: none;
        background: red;
        opacity: 0%;
        margin-top: 500px;
        position: fixed;
        z-index: 90;
        top: -50%;
        left: 50%;
        transform: translate(-50%,-50%);
    }
    .anim {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        width: 70%;
        background-image: url(seq3/intro_0.png);
    }
    .heading {
        font-family: 'rock';
        text-align: left;
        padding-left: 10%;
        font-size: 150%;
    }
    .content {
        font-family: 'klik';
        text-align: center;
        font-size: 100%;
    }
    .wrapper {
        margin: 5%;
        padding: 5%;
        margin-top: 10%;
    }
    .logo {
        position:fixed;
        width: 15%;
        right:0;
        left:0;
        top:1%;
        z-index:2;
        margin: auto;
    }
    .floater {
        position: fixed;
        /*transform: scaleY(-1);
        animation: float 25s linear infinite;*/
        animation: none;
        width: 150%;
        margin: auto;
        top: 0;
        z-index: -1;
        left: -25%;
        right: 0;
        transform: translate(-2.5%,2.5%);
    }
    @keyframes float {
        0% {
            transform: translate(-2.5%,2.5%);
        }
        12.5% {
            transform: translate(-5%,0%);
        }
        25% {
            transform: translate(-2.5%,-2.5%) rotate(-3deg);
        }
        37.5% {
            transform: translate(0%,-5%);
        }
        50% {
            transform: translate(2.5%,-2.5%) rotate(3deg);
        }
        62.5% {
            transform: translate(5%,0%);
        }
        75% {
            transform: translate(2.5%,2.5%);
        }
        87.5% {
            transform: translate(0%,5%);
        }
        100% {
            transform: translate(-2.5%,2.5%);
        }
    }
    @keyframes slideup {
        0% {
            
        }
    }
    .header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 13vw;
        background: #000;
        z-index: 2;
    }
    .backdrop {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: -2;
        background: #000;
        position: fixed;
    }
    .glare {
        pointer-events: none;
        position: fixed;
        width: 100%;
        height: 100%;
        left: 0;
        right: 0;
        z-index: 3;
        mix-blend-mode: color-dodge;
        opacity: 80%;
        background: linear-gradient(222deg, #666666, #2d2d2d, #666666, #b1b1b1, #666666, #c2c2c2, #666666, #3c3c3c, #666666, #515151, #424242);
        background-size: 2200% 2200%;

        -webkit-animation: AnimationName 9s ease infinite;
        -moz-animation: AnimationName 9s ease infinite;
        -o-animation: AnimationName 9s ease infinite;
        animation: AnimationName 9s ease infinite;
    }

    @-webkit-keyframes AnimationName {
        0%{background-position:0% 51%}
        50%{background-position:100% 50%}
        100%{background-position:0% 51%}
    }
    @-moz-keyframes AnimationName {
        0%{background-position:0% 51%}
        50%{background-position:100% 50%}
        100%{background-position:0% 51%}
    }
    @-o-keyframes AnimationName {
        0%{background-position:0% 51%}
        50%{background-position:100% 50%}
        100%{background-position:0% 51%}
    }
    @keyframes AnimationName {
        0%{background-position:0% 51%}
        50%{background-position:100% 50%}
        100%{background-position:0% 51%}
    }
    .mouse {
        width: 50px;
        height: 50px;
        position: fixed;
        background: red;
    }
</style>

<style> 
    .bg {
  position: fixed;
  z-index: 999999;
  top: -50%;
  left: -50%;
  right: -50%;
  bottom: -50%;
  width: 200%;
  height: 200vh;
  background: transparent url('http://assets.iceable.com/img/noise-transparent.png') repeat 0 0;
  background-repeat: repeat;
  animation: bg-animation .2s infinite;
  opacity: 100%;
  visibility: visible;
  pointer-events: none;
}
@keyframes bg-animation {
    0% { transform: translate(0,0) }
    10% { transform: translate(-5%,-5%) }
    20% { transform: translate(-10%,5%) }
    30% { transform: translate(5%,-10%) }
    40% { transform: translate(-5%,15%) }
    50% { transform: translate(-10%,5%) }
    60% { transform: translate(15%,0) }
    70% { transform: translate(0,10%) }
    80% { transform: translate(-15%,0) }
    90% { transform: translate(10%,5%) }
    100% { transform: translate(5%,0) }
}
</style>
    
<style>
    @media only screen and (min-width: 600px) {
        .floater {
            width: 130%;
            left: -15%;
        }
    }
    @media only screen and (min-width: 800px) {
        .floater {
            top: 5%;
            width: 80%;
            left: 0%;
        }
    }
    @media only screen and (min-width: 1200px) {
        .floater {
            top: -5%;
        }
    }
    @media only screen and (min-width: 1500px) {
        .floater {
            top: -18%;
        }
    }
</style> <!--media queries-->

<body>
    
    <div id="loader">
        <img class="anim" id="anim"/>
    </div>

    <div class="header"></div>
    <canvas class="logo" id="hero2"></canvas>


    <div id="main">
        
    <button class="menuon"></button>
    <button class="menuoff"></button>
    
    <div class="glare"></div>
        
            
    <canvas class="floater" id="hero"></canvas>
        
    <div class="backdrop"></div>
    
    <div class="layout"></div>
        
    <div class="wrapper">
        
    <!--
    <p class="heading">
        Madindex
    </p>
        
    <p class="content">
    </p>
        
    <p class="heading">
        Madindex
    </p>
    -->
        
        <div style="height:2000px;"></div>
        
    <p class="content">
        <span></span>&emsp;
    </p>
        
    </div>
        
    </div> <!--main-->
    
    <div class="layout"></div>
    
    <div class="menuwrap"></div>
    
<div class="bg">  
</div>
    
</body> 
    
<script>
    var skew = document.getElementById('hero');

    window.onmousemove = function (e) {
        var x = e.clientX,
            y = e.clientY;
        
        skew.style.top = (y + 2)*-.02 + 'px';
        skew.style.left = (x + 2)*-.02 + 'px';
    };
</script>
    
<script>
    
const $element = $('.anim');
const imagePath = '/seq3';
const totalFrames = 29;
const animationDuration = 1000;
const timePerFrame = animationDuration / totalFrames;
let timeWhenLastUpdate;
let timeFromLastUpdate;
let frameNumber = 0;

function step2(startTime) {
    
    if (frameNumber == 29) {
    document.getElementById("anim").style.backgroundImage = "url(seq3/intro_29.png)";
        return;
}

  if (!timeWhenLastUpdate) timeWhenLastUpdate = startTime;
  timeFromLastUpdate = startTime - timeWhenLastUpdate;

  if (timeFromLastUpdate > timePerFrame) {

    $element.attr('src', imagePath + `/intro_${frameNumber}.png`);
    timeWhenLastUpdate = startTime;

    if (frameNumber >= totalFrames) {
      frameNumber = 1;
    } else {
      frameNumber = frameNumber + 1;
    }        
  }
  
  requestAnimationFrame(step2);
}

$(document).ready(() => {
  for (var i = 1; i < totalFrames + 1; i++) {
    $('body').append(`<div id="preload-image-${i}" style="background-image: url('${imagePath}/intro_${i}.png');"></div>`);
  }
});

$(window).on('load', () => {
  requestAnimationFrame(step2);
});
    
</script>
    
<script>
    $('.menuOn').click(function() {
        document.getElementById("menu").style.animation = "menuin 1s forwards";
        document.getElementById("main").style.display = "none";
    });
    $('.menuOff').click(function() {
        document.getElementById("menu").style.animation = "menuout 1s forwards";
        document.getElementById("main").style.display = "block";
    });
</script>
    
<script>
    const html = document.documentElement;
const canvas = document.getElementById("hero");
const context = canvas.getContext("2d");

const frameCount = 116;
const currentFrame = index => (
  `seq/m_${index.toString().padStart(1, '0')}.png` //5 jpg
)

const preloadImages = () => {
  for (let i = 1; i < frameCount; i++) {
    const img = new Image();
    img.src = currentFrame(i);
  }
};

const img = new Image()
img.src = currentFrame(1);
canvas.width=1080; //540
canvas.height=1080; //350
img.onload=function(){
  context.drawImage(img, 0, 0);
}

const updateImage = index => {
  img.src = currentFrame(index);
  context.drawImage(img, 0, 0);
}

window.addEventListener('scroll', () => {  
  const scrollTop = html.scrollTop;
  const maxScrollTop = html.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / maxScrollTop;
  const frameIndex = Math.min(
    frameCount - 1,
    Math.ceil(scrollFraction * frameCount)
  );
  
  requestAnimationFrame(() => updateImage(frameIndex + 1))
});

preloadImages();

const html2 = document.documentElement;
const canvas2 = document.getElementById("hero2");
const context2 = canvas2.getContext("2d");

const frameCount2 = 61;
const currentFrame2 = index => (
  `seq2/m_${index.toString().padStart(5, '0')}.jpg`
)

const preloadImages2 = () => {
  for (let i = 1; i < frameCount2; i++) {
    const img = new Image();
    img.src = currentFrame2(i);
  }
};

const img2 = new Image()
img2.src = currentFrame2(1);
canvas2.width=540;
canvas2.height=350;
img2.onload=function(){
  context2.drawImage(img2, 0, 0);
}

const updateImage2 = index => {
  img2.src = currentFrame2(index);
  context2.drawImage(img2, 0, 0);
}

window.addEventListener('scroll', () => {  
  const scrollTop = html2.scrollTop;
  const maxScrollTop = html.scrollHeight - window.innerHeight;
  const scrollFraction = scrollTop / maxScrollTop;
  const frameIndex = Math.min(
    frameCount2 - 1,
    Math.ceil(scrollFraction * frameCount2)
  );
  
  requestAnimationFrame(() => updateImage2(frameIndex + 1))
});

preloadImages2();
</script>
    
<script>
    console.log("Copyright 2021 Designed by Madindex © All Rights Reserved");
</script>
    
</html>